const { projType, globalObjectKey, appRoot } = require('../constants');
var { publicPath, outputUseHash, buildProd, projectType } = global[
  globalObjectKey
];
const path = require('path');
module.exports = output => {

  const obj = {
    path: path.resolve(appRoot, 'dist/'),
    publicPath: publicPath,
    pathinfo: !buildProd
  };

  let name = '[name].chunk.js';
  let nameProd = '[name]-[chunkhash].chunk.min.js';

  if (projectType === projType.module) {
    let packageVersion = require('./get-proj-version')();
    name = '[name].js';
    nameProd = `[name]-${packageVersion}.min.js`;
  }

  Object.assign(
    obj,
    {
      filename: outputUseHash ? nameProd : name,
      chunkFilename: outputUseHash ? nameProd : name
    },
    output
  );

  return obj;
};
