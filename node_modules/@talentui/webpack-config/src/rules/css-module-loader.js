const { globalObjectKey } = require("../constants");

var { cssModules,cssSourceMap, buildProd, postCSS } = global[globalObjectKey];

const cssLoader = {
  loader: 'css-loader',
  options: {}
}

if(cssModules) {
  cssLoader.options = {
    modules: true,
    localIdentName: buildProd ? '[hash:base64:5]' : '[path][name]__[local]--[hash:base64:5]',
  }
}

if(postCSS && cssModules){
  cssLoader.options.importLoaders = 1;
}
if(cssSourceMap) {
  cssLoader.options.sourceMap = true
}

module.exports = cssLoader;